{% extends "base.html" %}

{% block title %}Visualizar Despesas{% endblock %}

{% block content %}
    <h1>Visualizar Despesas</h1>
    
    <form method="POST" action="{{ url_for('view_expenses') }}">
        <div class="form-row align-items-center">
            <div class="col-auto">
                <label class="sr-only" for="month">Mês</label>
                <select class="form-control mb-2" id="month" name="month">
                    {% for m in range(1, 13) %}
                        <option value="{{ m }}" {% if m == start_date.month %}selected{% endif %}>{{ m }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-auto">
                <label class="sr-only" for="year">Ano</label>
                <select class="form-control mb-2" id="year" name="year">
                    {% for y in range(2020, 2031) %}
                        <option value="{{ y }}" {% if y == start_date.year %}selected{% endif %}>{{ y }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mb-2">Ver Despesas</button>
            </div>
        </div>
    </form>

    <h2>Despesas - {{ start_date.strftime('%B de %Y') }}</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Data</th>
                <th>Categoria</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
                <tr>
                    <td>{{ expense.description }}</td>
                    <td>{{ expense.amount }}</td>
                    <td>{{ expense.date }}</td>
                    <td>{{ expense.category.name }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
